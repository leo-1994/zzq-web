const heroes = [
    {
        "name": "斧王",
        "level": 1,
        "position": "-15px -8px",
        "color": "#BCBCBC",
        "tags": [
            "兽人",
            "战士"
        ]
    },
    {
        "name": "魅惑魔女",
        "level": 1,
        "position": "-15px -48px",
        "color": "#BCBCBC",
        "tags": [
            "野兽",
            "德鲁伊"
        ]
    },
    {
        "name": "蓝胖",
        "level": 1,
        "position": "-15px -88px",
        "color": "#BCBCBC",
        "tags": [
            "食人魔",
            "法师"
        ]
    },
    {
        "name": "巨牙海民",
        "level": 1,
        "position": "-15px -128px",
        "color": "#BCBCBC",
        "tags": [
            "战士",
            "野兽"
        ]
    },
    {
        "name": "黑暗游侠",
        "level": 1,
        "position": "-15px -168px",
        "color": "#BCBCBC",
        "tags": [
            "亡灵",
            "猎人"
        ]
    },
    {
        "name": "赏金猎人",
        "level": 1,
        "position": "-15px -208px",
        "color": "#BCBCBC",
        "tags": [
            "地精",
            "刺客"
        ]
    },
    {
        "name": "发条技师",
        "level": 1,
        "position": "-15px -248px",
        "color": "#BCBCBC",
        "tags": [
            "地精",
            "工匠"
        ]
    },
    {
        "name": "暗影萨满",
        "level": 1,
        "position": "-15px -288px",
        "color": "#BCBCBC",
        "tags": [
            "巨魔",
            "萨满"
        ]
    },
    {
        "name": "蝙蝠骑士",
        "level": 1,
        "position": "-15px -328px",
        "color": "#BCBCBC",
        "tags": [
            "巨魔",
            "骑士"
        ]
    },
    {
        "name": "修补匠",
        "level": 1,
        "position": "-15px -368px",
        "color": "#BCBCBC",
        "tags": [
            "地精",
            "工匠"
        ]
    },
    {
        "name": "敌法师",
        "level": 1,
        "position": "-15px -408px",
        "color": "#BCBCBC",
        "tags": [
            "精灵",
            "恶魔猎手"
        ]
    },
    {
        "name": "水晶室女",
        "level": 2,
        "position": "-15px -448px",
        "color": "#BBBAFB",
        "tags": [
            "法师",
            "人类"
        ]
    },
    {
        "name": "兽王",
        "level": 2,
        "position": "-15px -488px",
        "color": "#BBBAFB",
        "tags": [
            "兽人",
            "猎人"
        ]
    },
    {
        "name": "剑圣",
        "level": 2,
        "position": "-15px -528px",
        "color": "#BBBAFB",
        "tags": [
            "兽人",
            "战士"
        ]
    },
    {
        "name": "伐木机",
        "level": 2,
        "position": "-15px -568px",
        "color": "#BBBAFB",
        "tags": [
            "地精",
            "工匠"
        ]
    },
    {
        "name": "痛苦女王",
        "level": 2,
        "position": "-15px -608px",
        "color": "#BBBAFB",
        "tags": [
            "刺客",
            "恶魔"
        ]
    },
    {
        "name": "精灵龙",
        "level": 2,
        "position": "-15px -648px",
        "color": "#BBBAFB",
        "tags": [
            "法师",
            "精灵",
            "龙"
        ]
    },
    {
        "name": "巫医",
        "level": 2,
        "position": "-15px -688px",
        "color": "#BBBAFB",
        "tags": [
            "巨魔",
            "术士"
        ]
    },
    {
        "name": "鱼人守卫",
        "level": 2,
        "position": "-15px -728px",
        "color": "#BBBAFB",
        "tags": [
            "战士",
            "娜迦"
        ]
    },
    {
        "name": "混沌骑士",
        "level": 2,
        "position": "-15px -768px",
        "color": "#BBBAFB",
        "tags": [
            "骑士",
            "恶魔"
        ]
    },
    {
        "name": "树精卫士",
        "level": 2,
        "position": "-646px -8px",
        "color": "#BBBAFB",
        "tags": [
            "德鲁伊",
            "精灵"
        ]
    },
    {
        "name": "月之骑士",
        "level": 2,
        "position": "-646px -48px",
        "color": "#BBBAFB",
        "tags": [
            "骑士",
            "精灵"
        ]
    },
    {
        "name": "先知",
        "level": 2,
        "position": "-646px -88px",
        "color": "#BBBAFB",
        "tags": [
            "德鲁伊",
            "精灵"
        ]
    },
    {
        "name": "狼人",
        "level": 3,
        "position": "-646px -128px",
        "color": "#4442FD",
        "tags": [
            "战士",
            "野兽",
            "人类"
        ]
    },
    {
        "name": "剧毒术士",
        "level": 3,
        "position": "-646px -168px",
        "color": "#4442FD",
        "tags": [
            "野兽",
            "术士"
        ]
    },
    {
        "name": "全能骑士",
        "level": 3,
        "position": "-646px -208px",
        "color": "#4442FD",
        "tags": [
            "骑士",
            "人类"
        ]
    },
    {
        "name": "闪电幽魂",
        "level": 3,
        "position": "-646px -248px",
        "color": "#4442FD",
        "tags": [
            "法师",
            "元素"
        ]
    },
    {
        "name": "风行者",
        "level": 3,
        "position": "-646px -288px",
        "color": "#4442FD",
        "tags": [
            "猎人",
            "精灵"
        ]
    },
    {
        "name": "幻影刺客",
        "level": 3,
        "position": "-646px -328px",
        "color": "#4442FD",
        "tags": [
            "刺客",
            "精灵"
        ]
    },
    {
        "name": "死亡骑士",
        "level": 3,
        "position": "-646px -368px",
        "color": "#4442FD",
        "tags": [
            "亡灵",
            "骑士"
        ]
    },
    {
        "name": "沙王",
        "level": 3,
        "position": "-646px -408px",
        "color": "#4442FD",
        "tags": [
            "野兽",
            "刺客"
        ]
    },
    {
        "name": "小鱼人",
        "level": 3,
        "position": "-646px -448px",
        "color": "#4442FD",
        "tags": [
            "刺客",
            "娜迦"
        ]
    },
    {
        "name": "狙击手",
        "level": 3,
        "position": "-646px -488px",
        "color": "#4442FD",
        "tags": [
            "猎人",
            "矮人"
        ]
    },
    {
        "name": "冥界亚龙",
        "level": 3,
        "position": "-646px -528px",
        "color": "#4442FD",
        "tags": [
            "刺客",
            "龙"
        ]
    },
    {
        "name": "影魔",
        "level": 3,
        "position": "-646px -568px",
        "color": "#4442FD",
        "tags": [
            "恶魔",
            "术士"
        ]
    },
    {
        "name": "丽娜",
        "level": 3,
        "position": "-646px -608px",
        "color": "#4442FD",
        "tags": [
            "法师",
            "人类"
        ]
    },
    {
        "name": "末日使者",
        "level": 4,
        "position": "-646px -648px",
        "color": "#FE03FA",
        "tags": [
            "战士",
            "恶魔"
        ]
    },
    {
        "name": "海军上将",
        "level": 4,
        "position": "-646px -688px",
        "color": "#FE03FA",
        "tags": [
            "战士",
            "人类"
        ]
    },
    {
        "name": "巨魔战将",
        "level": 4,
        "position": "-646px -728px",
        "color": "#FE03FA",
        "tags": [
            "战士",
            "巨魔"
        ]
    },
    {
        "name": "光之守卫",
        "level": 4,
        "position": "-646px -768px",
        "color": "#FE03FA",
        "tags": [
            "法师",
            "人类"
        ]
    },
    {
        "name": "死灵法师",
        "level": 4,
        "position": "-1275px -8px",
        "color": "#FE03FA",
        "tags": [
            "亡灵",
            "术士"
        ]
    },
    {
        "name": "圣堂刺客",
        "level": 4,
        "position": "-1275px -48px",
        "color": "#FE03FA",
        "tags": [
            "刺客",
            "精灵"
        ]
    },
    {
        "name": "炼金术士",
        "level": 4,
        "position": "-1275px -88px",
        "color": "#FE03FA",
        "tags": [
            "地精",
            "术士"
        ]
    },
    {
        "name": "干扰者",
        "level": 4,
        "position": "-1275px -128px",
        "color": "#FE03FA",
        "tags": [
            "兽人",
            "萨满"
        ]
    },
    {
        "name": "蛇发女妖",
        "level": 4,
        "position": "-1275px -168px",
        "color": "#FE03FA",
        "tags": [
            "猎人",
            "娜迦"
        ]
    },
    {
        "name": "龙骑士",
        "level": 4,
        "position": "-1275px -208px",
        "color": "#FE03FA",
        "tags": [
            "骑士",
            "人类",
            "龙"
        ]
    },
    {
        "name": "德鲁伊",
        "level": 4,
        "position": "-1275px -248px",
        "color": "#FE03FA",
        "tags": [
            "野兽",
            "德鲁伊"
        ]
    },
    {
        "name": "飞机",
        "level": 5,
        "position": "-1275px -288px",
        "color": "#FD8B00",
        "tags": [
            "工匠",
            "矮人"
        ]
    },
    {
        "name": "巫妖",
        "level": 5,
        "position": "-1275px -328px",
        "color": "#FD8B00",
        "tags": [
            "法师",
            "亡灵"
        ]
    },
    {
        "name": "潮汐猎人",
        "level": 5,
        "position": "-1275px -368px",
        "color": "#FD8B00",
        "tags": [
            "猎人",
            "娜迦"
        ]
    },
    {
        "name": "谜团",
        "level": 5,
        "position": "-1275px -408px",
        "color": "#FD8B00",
        "tags": [
            "术士",
            "元素"
        ]
    },
    {
        "name": "炸弹人",
        "level": 5,
        "position": "-1275px -448px",
        "color": "#FD8B00",
        "tags": [
            "地精",
            "工匠"
        ]
    }
];
const tagEffects = [
    {
        "tagName": "亡灵",
        "effectName": "2亡灵",
        "threshold": 2,
        "detail": "敌方全体减甲8"
    },
    {
        "tagName": "亡灵",
        "effectName": "4亡灵",
        "threshold": 4,
        "detail": "敌方全体减甲10"
    },
    {
        "tagName": "人类",
        "effectName": "2人类",
        "threshold": 2,
        "detail": "所有人类普通攻击20%概率缴械3秒"
    },
    {
        "tagName": "人类",
        "effectName": "4人类",
        "threshold": 4,
        "detail": "所有人类普通攻击25%概率缴械3秒"
    },
    {
        "tagName": "人类",
        "effectName": "6人类",
        "threshold": 6,
        "detail": "所有人类普通攻击30%概率缴械3秒"
    },
    {
        "tagName": "元素",
        "effectName": "2元素",
        "threshold": 2,
        "detail": "所有元素魔抗+30"
    },
    {
        "tagName": "兽人",
        "effectName": "2兽人",
        "threshold": 2,
        "detail": "全体兽人+250血"
    },
    {
        "tagName": "兽人",
        "effectName": "4兽人",
        "threshold": 4,
        "detail": "全体兽人+350血"
    },
    {
        "tagName": "刺客",
        "effectName": "3刺客",
        "threshold": 3,
        "detail": "所有刺客10%概率4倍暴击"
    },
    {
        "tagName": "刺客",
        "effectName": "6刺客",
        "threshold": 6,
        "detail": "所有刺客20%概率4倍暴击"
    },
    {
        "tagName": "地精",
        "effectName": "3地精",
        "threshold": 3,
        "detail": "使随机一友军护甲+15回血+10"
    },
    {
        "tagName": "地精",
        "effectName": "6地精",
        "threshold": 6,
        "detail": "使全体地精护甲+15回血+10"
    },
    {
        "tagName": "娜迦",
        "effectName": "2娜迦",
        "threshold": 2,
        "detail": "全体队友魔抗+30"
    },
    {
        "tagName": "娜迦",
        "effectName": "4娜迦",
        "threshold": 4,
        "detail": "全体队友魔抗+60"
    },
    {
        "tagName": "工匠",
        "effectName": "2工匠",
        "threshold": 2,
        "detail": "所有工匠回血+10"
    },
    {
        "tagName": "工匠",
        "effectName": "4工匠",
        "threshold": 4,
        "detail": "所有工匠回血+20"
    },
    {
        "tagName": "巨魔",
        "effectName": "2巨魔",
        "threshold": 2,
        "detail": "所有巨魔攻速+30"
    },
    {
        "tagName": "巨魔",
        "effectName": "4巨魔",
        "threshold": 4,
        "detail": "全体攻速+30"
    },
    {
        "tagName": "德鲁伊",
        "effectName": "2德鲁伊",
        "threshold": 2,
        "detail": "当2个不同德鲁伊在场时，德鲁伊升2星只需2个相同"
    },
    {
        "tagName": "德鲁伊",
        "effectName": "4德鲁伊",
        "threshold": 4,
        "detail": "当4个不同德鲁伊在场时，德鲁伊升3星只需2个相同"
    },
    {
        "tagName": "恶魔",
        "effectName": "1恶魔",
        "threshold": 1,
        "detail": "场上只有一个恶魔时恶魔攻击+50%"
    },
    {
        "tagName": "恶魔",
        "effectName": "2恶魔",
        "threshold": 2,
        "detail": "恶魔buff失效"
    },
    {
        "tagName": "恶魔猎手",
        "effectName": "1恶魔猎手",
        "threshold": 1,
        "detail": "敌方恶魔不加攻"
    },
    {
        "tagName": "战士",
        "effectName": "3战士",
        "threshold": 3,
        "detail": "所有战士护甲+7"
    },
    {
        "tagName": "战士",
        "effectName": "6战士",
        "threshold": 6,
        "detail": "所有战士护甲+10"
    },
    {
        "tagName": "术士",
        "effectName": "3术士",
        "threshold": 3,
        "detail": "全体队友吸血+15%"
    },
    {
        "tagName": "术士",
        "effectName": "6术士",
        "threshold": 6,
        "detail": "全体队友吸血+25%"
    },
    {
        "tagName": "法师",
        "effectName": "3法师",
        "threshold": 3,
        "detail": "所有敌人魔抗-30"
    },
    {
        "tagName": "法师",
        "effectName": "6法师",
        "threshold": 6,
        "detail": "所有敌人魔抗-60"
    },
    {
        "tagName": "猎人",
        "effectName": "3猎人",
        "threshold": 3,
        "detail": "所有猎人攻击+25%"
    },
    {
        "tagName": "猎人",
        "effectName": "6猎人",
        "threshold": 6,
        "detail": "所有猎人攻击+35%"
    },
    {
        "tagName": "矮人",
        "effectName": "1矮人",
        "threshold": 1,
        "detail": "矮人攻击距离+300"
    },
    {
        "tagName": "精灵",
        "effectName": "2精灵",
        "threshold": 2,
        "detail": "所有精灵+20%闪避"
    },
    {
        "tagName": "精灵",
        "effectName": "4精灵",
        "threshold": 4,
        "detail": "所有精灵+25%闪避"
    },
    {
        "tagName": "精灵",
        "effectName": "6精灵",
        "threshold": 6,
        "detail": "所有精灵+30%闪避"
    },
    {
        "tagName": "萨满",
        "effectName": "2萨满",
        "threshold": 2,
        "detail": "开局随机羊一敌人6秒"
    },
    {
        "tagName": "野兽",
        "effectName": "2野兽",
        "threshold": 2,
        "detail": "全体攻击+10%"
    },
    {
        "tagName": "野兽",
        "effectName": "4野兽",
        "threshold": 4,
        "detail": "全体攻击+15%"
    },
    {
        "tagName": "野兽",
        "effectName": "6野兽",
        "threshold": 6,
        "detail": "全体攻击力+20%"
    },
    {
        "tagName": "食人魔",
        "effectName": "1食人魔",
        "threshold": 1,
        "detail": "食人魔血量+10%"
    },
    {
        "tagName": "骑士",
        "effectName": "2骑士",
        "threshold": 2,
        "detail": "所有骑士25%时间加盾"
    },
    {
        "tagName": "骑士",
        "effectName": "4骑士",
        "threshold": 4,
        "detail": "所有骑士35%时间加盾"
    },
    {
        "tagName": "骑士",
        "effectName": "6骑士",
        "threshold": 6,
        "detail": "所有骑士45%时间加盾"
    },
    {
        "tagName": "龙",
        "effectName": "3龙",
        "threshold": 3,
        "detail": "全体龙开局满魔"
    }
];

function getEffects(heroNames) {
    let heroNameArr = heroNames.split(",");
    // 去重
    let heroNameSet = new Set(heroNameArr);
    let tagArr = [];
    heroNameSet.forEach(function (heroName) {
        tagArr = tagArr.concat(getHeroTags(heroName))
    });
    let effects = [];
    tagEffects.forEach(function (tagEffect) {
        let tagCount = getCount(tagArr, tagEffect.tagName);
        if (tagCount >= tagEffect.threshold) {
            effects.push(tagEffect);
        }
    });
    return effects;
}

function getHeroTags(heroName) {
    for (let i = 0; i < heroes.length; i++) {
        if (heroes[i].name.trim() === heroName.trim()) {
            return heroes[i].tags;
        }
    }
}

function getCount(tagArr, tag) {
    let count = 0;
    tagArr.forEach(function (e) {
        if (e === tag) {
            count++;
        }
    });
    return count;
}